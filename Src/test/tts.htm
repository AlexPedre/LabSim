
<!------------------------------------------->
<!--     LabSim - Text to Speech Test      -->
<!--  (c) 2020-2025, Alessandro Pedretti   -->
<!------------------------------------------->

<!DOCTYPE html>
<html>
  <head>
    <meta charset="ISO-8859-1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"              content="width=device-width">
    <meta name="description"           content="Laboratory Simulator of Inorganic Qualitative Analysis">
    <meta name="author"                content="Alessandro Pedretti">
    <meta name="keywords"              content="analysis, chemistry, simulator, VR">

    <title>LabSim - Text to Speech Test</title>

    <!-- Icons -->

    <link rel="apple-touch-icon" sizes="57x57" href="../icon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="../icon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="../icon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="../icon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="../icon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="../icon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="../icon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="../icon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../icon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../icon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="../icon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../icon/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="../icon/android-icon-192x192.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="../icon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <!-- Check the browser -->

    <script type="text/javascript">
      var IsChrome = (window.navigator.userAgent.indexOf("Chrome") > -1);
      var IsEdge   = (window.navigator.userAgent.indexOf('Edg/') > -1);
      var IsIE     = ((window.navigator.userAgent.indexOf("MSIE ") > -1) || (!!navigator.userAgent.match(/Trident.*rv\:11\./)));
      var Lang     = navigator.language.substring(0, 2);

      if ((!IsChrome) && (!IsEdge)) {
        if (IsIE) document.execCommand('Stop');
        else window.stop();
        if (Lang === 'it')
          alert("Il tuo browser non \u00E8 supportato.\nProva Chrome o Edge.");
        else
          alert('Your browser is not supported.\nTry Chrome or Edge.');
        fail;
      }
    </script>

    <!-- Stylesheet -->

    <link rel="stylesheet" type="text/css" href="../css/labsim.css">

    <!-- JavaScripts -->

    <script type="text/javascript">

      /**** Clear the cache ****/

      function CacheClear()
      {
        var Http   = new XMLHttpRequest();
        var TtsURI = document.location.href;

        TtsURI = TtsURI.substring(0, TtsURI.lastIndexOf('/'));
        TtsURI = TtsURI.substring(0, TtsURI.lastIndexOf('/')) + '/tts.php?command=CacheClear';

        Http.open("GET", TtsURI);
        Http.responseType = "text";
        Http.onload = function() {
          alert(Http.responseText);
        };
        Http.send();
      }


      /**** Show event ****/

      function ShowEvent()
      {
        var Page  = document.querySelector('#page');

        Page.querySelector('#copyright').innerHTML = '&copy; 2020-' + new Date().getFullYear() +
                                                     ', Alessandro Pedretti - Universit&agrave; degli Studi di Milano';

        /**** Press enter event ****/

        document.getElementById("str_text").addEventListener("keyup", function(event) {
          if (event.keyCode === 13) {
            event.preventDefault();
            SpeechClick();
          }
        });

        /**** Show the page ****/

        document.getElementById("DivSplash").style.display = "none";
        document.getElementById("pagecont" ).style.display = "inline";
      }


      /**** Speech ****/

      function SpeechClick()
      {
        var Text = document.querySelector('#str_text').value;

        if (!Text) {
          alert("Nothing to speech!");
          return;
        }

        var TtsURI = document.location.href;

        TtsURI = TtsURI.substring(0, TtsURI.lastIndexOf('/'));
        TtsURI = encodeURI(TtsURI.substring(0, TtsURI.lastIndexOf('/')) + '/tts.php?lang=' + document.querySelector('#cb_language').value +
                           '&text=' + Text);

        var audio = new Audio(TtsURI);
        audio.play();

      }
    </script>
  </head>

  <body oncontextmenu="return false;" onpageshow="ShowEvent()">
    <!-- Splash screen -->

    <div id="DivSplash" class="SplashScreen">
      <div class="SplashAnim"></div>
      <p id="TextSplash" align="center" style="font-size: 24px; font-family:'Arial'; margin-top: 150px;">Loading Text to Speech Test...</p>
    </div>

    <div class="tvmenuback" id="pagecont" style="position: absolute; width: 1280px; display: none;">
      <div class="anapage" id="page">
        <div id="title" style="width: 1004px; height: 120px; float: left; line-height: 120px;
             font-size: 64px; font-weight: bold; font-family: Arial, Helvetica, sans-serif">Text to Speech Test</div>
        <div style="width: 240px; height: 120px; float: left; line-height: 120px;">
         <img style="vertical-align: middle;" src="../images/labsim_logo.png"/>
        </div>

        <table>
          <tr><td>
            <label class="analabel" id="lbl_language">Language:</label>
            <select name="languages" id="cb_language" style="font-size: 18px; width: 128px; margin-left: -4px; ">
              <option value="de-DE">German</option>
              <option value="en-US">English US</option>
              <option value="en-GB">English GB</option>
              <option value="fr-FR">French</option>
              <option value="it-IT" selected>Italian</option>
              <option value="es-ES">Spanish</option>
            </select>
            <input class="anabutton" id="bt_cacheclear" type="submit" value="Clear cache" style="width: 128px;" onclick="CacheClear()">
            <br><br>
            <label class="analabel" id="lbl_text">Text to speech:</label><input id="str_text" type="search" style="font-size: 18px; width: 256px;">
            <br><br>
            <br>
          </tr></td>

          <tr><td align="center">
            <input class="anabutton" id="bt_speech" type="submit" value="Speech" onclick="SpeechClick()">
          </tr></td>
        </table>

        <div id="copyright" style="position: absolute; top: 660px; left: 24px; width: 1216px; text-align: center; font-family: Arial, Helvetica, sans-serif; font-size: 14px">
        </div>
      </div>
    </div>
  </body>
</html>
