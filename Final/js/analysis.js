var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(b){var a=0;return function(){return a<b.length?{done:!1,value:b[a++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.makeIterator=function(b){var a="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return a?a.call(b):$jscomp.arrayIterator(b)};
function CodeFromID(b){var a=Math.floor(254*Math.random()+1),d=b+a;255<d&&(d-=255);b=b^a^CODE_INTK;d=d^a^CODE_INTK;a^=CODE_INTK;for(Code=(d+(b<<8)+(a<<16)).toString(16).toUpperCase();6>Code.length;)Code="0"+Code;return Code}
function CodeGen(b,a,d){if(b&&(a||d)){var e,c=a+d,h=Msg.AnaCsvStudentID;for(e=1;e<=c;++e)h+=";"+Msg.AnaCsvAnalyteID+" "+e+";"+Msg.AnaCsvAnalyte+" "+e+";"+Msg.AnaCsvCode+" "+e;h+="\n";for(e=1;e<=b;++e){var k=[];h+=e;for(c=1;c<=a;++c)for(;;){var f=hDb.prepare("SELECT MoleculeID FROM Molecules WHERE (Analyte AND SolWater) ORDER BY RANDOM() LIMIT 1");if(f.step()){var g=f.getAsObject().MoleculeID;if(-1===k.indexOf(g)){k.push(g);f.free();break}}f.free()}for(c=1;c<=d;++c)for(;;){f=hDb.prepare("SELECT MoleculeID FROM Molecules WHERE (Analyte AND NOT SolWater) ORDER BY RANDOM() LIMIT 1");
if(f.step()&&(g=f.getAsObject().MoleculeID,-1===k.indexOf(g))){k.push(g);f.free();break}f.free()}a&&d&&ShuffleArray(k);g=$jscomp.makeIterator(k);for(c=g.next();!c.done;c=g.next())c=c.value,h+=";"+c+";"+GetMolFormulaByID(c)+';="'+CodeFromID(c)+'"';h+="\n"}SaveAs(h,Msg.AnaFileName,"text/plain;charset=utf-8")}}
function GenerateClick(){var b=parseInt(document.querySelector("#str_insoluble").value),a=parseInt(document.querySelector("#str_soluble").value),d=parseInt(document.querySelector("#str_students").value);1>b+a?alert(Msg.AnaErrSubstNum):CodeGen(d,a,b)}
function ShowEvent(){LoadBinaryFile("db/LabSim.sqlite?ver="+LABSIM_VER,function(b){initSqlJs({locateFile:function(){return"dist/sql-wasm.wasm"}}).then(function(a){hDb=new a.Database(b);a=document.querySelector("#page");a.querySelector("#bt_generate").value=Msg.AnaBtGenerate;a.querySelector("#lbl_insoluble").textContent=Msg.AnaLblInsoluble;a.querySelector("#lbl_soluble").textContent=Msg.AnaLblSoluble;a.querySelector("#lbl_students").textContent=Msg.AnaLblStudents;a.querySelector("#title").textContent=
Msg.AnaTitle;a.querySelector("#year2").textContent=(new Date).getFullYear();document.getElementById("DivSplash").style.display="none";document.getElementById("pagecont").style.display=""})})};
