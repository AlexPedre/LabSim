var Lang,ServerIni,IsChrome=-1<window.navigator.userAgent.indexOf("Chrome")||-1<window.navigator.userAgent.indexOf("CriOS"),IsEdge=-1<window.navigator.userAgent.indexOf("Edg/"),IsIE=-1<window.navigator.userAgent.indexOf("MSIE ")||!!navigator.userAgent.match(/Trident.*rv:11\./);IniLoad();var UrlParams=new URLSearchParams(window.location.search),UrlLang=UrlParams.get("lang");
UrlLang?(UrlLang=UrlLang.toLowerCase(),Lang="auto"===UrlLang?navigator.language.substring(0,2):UrlLang):Lang="auto"===IniGetStr("Locale","Lang","auto")?navigator.language.substring(0,2):IniGetStr("Locale","Lang");if(!IsChrome&&!IsEdge)throw IsIE?document.execCommand("Stop"):window.stop(),"it"===navigator.language.substring(0,2)?alert("Il tuo browser non \u00e8 supportato.\nProva Chrome o Edge."):alert("Your browser is not supported.\nTry Chrome or Edge."),"";
function IniGetBool(a,c){if(!ServerIni)return!1;a=ServerIni[a][c].toUpperCase();return"1"===a||"TRUE"===a||"YES"===a}function IniGetStr(a,c,e){return ServerIni&&"undefined"!==typeof ServerIni[a]&&"undefined"!==typeof ServerIni[a][c]?ServerIni[a][c].toLowerCase():e}function IniLoad(){var a=new XMLHttpRequest,c=document.location.href;c=c.substring(0,c.lastIndexOf("/"))+"/labsim.ini?ver="+LABSIM_VER;a.open("GET",c,!1);a.send();ServerIni=IniParse(a.responseText)}
function IniParse(a){var c=/^\s*\[\s*([^\]]*)\s*\]\s*$/,e=/^\s*([^=]+?)\s*=\s*(.*?)\s*$/,g=/^\s*;.*$/,f={},d=null;a.split(/[\r\n]+/).forEach(function(b){g.test(b)||(e.test(b)?(b=b.match(e),d?f[d][b[1]]=b[2]:f[b[1]]=b[2]):c.test(b)?(b=b.match(c),f[b[1]]={},d=b[1]):0==b.length&&d&&(d=null))});return f}
function PrefsLoad(){var a=CookieRead(COOKIE_NAME);a?(a=a.split(";"),Prefs.Detail="1"==a[0],Prefs.SoundActive="1"==a[1],Prefs.SpeechRecActive="1"==a[2],Prefs.VoiceActive="1"==a[3],DEBUG&&console.log(LOG_PROMPT,"Preferences loaded")):DEBUG&&console.log(LOG_PROMPT,"Preferences NOT loaded")}
function PrefsSave(){Prefs.Changed&&(CookieWrite(COOKIE_NAME,COOKIE_EXPIRATION,Number(Prefs.Detail)+";"+Number(Prefs.SoundActive)+";"+Number(Prefs.SpeechRecActive)+";"+Number(Prefs.VoiceActive)),Prefs.Changed=!1,DEBUG&&console.log(LOG_PROMPT,"Preferences saved"))};
